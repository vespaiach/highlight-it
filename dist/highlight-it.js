var c=!1;function C(s){c=s}function l(...s){if(c)console.log("[highlight-it LOG]: ",...s)}function J(...s){if(c)console.warn("[highlight-it WARN]: ",...s)}function z(...s){console.error("[highlight-it ERROR]: ",...s)}function v(s){let{tagName:m,src:p}=s,y,h,x=new Promise((K,O)=>{[y,h]=[K,O]}),w;if(m==="link")w=document.createElement("link"),w.rel="stylesheet",w.href=p;else w=document.createElement("script"),w.defer=!0,w.src=p;return w.onload=()=>{y()},w.onerror=()=>{h(Error(`Failed to load ${m}: ${p}`))},document.body.appendChild(w),x}function F(){let s=document.currentScript,m={engine:"prism",theme:"prism",darkMode:"",verbose:!1};if(s&&s instanceof HTMLScriptElement&&s.src)try{let p=new URL(s.src),y=p.searchParams.get("engine");if(y==="highlight"||y==="highlightjs")m.engine="highlight";else if(y==="prism")m.engine="prism";m.theme=p.searchParams.get("theme")||p.searchParams.get("config")||"prism",m.darkMode=p.searchParams.get("darkmode")||p.searchParams.get("darkMode");let h=p.searchParams.get("verbose");if(h)m.verbose=["true","1","yes","on"].includes(h.toLowerCase())}catch(p){return J("Failed to parse script URL:",p),m}return m}function b(s){return Boolean(s)}class k{static loadedResources=new Set;async loadResource(s){if(k.isResourceLoaded(s))return;if(s.dependencies&&s.dependencies.length>0)await Promise.all(s.dependencies.map((m)=>this.loadResource(m)));b(s.script)&&await v({tagName:"script",src:s.script}),b(s.link)&&await v({tagName:"link",src:s.link}),k.addResourceLoaded(s)}static isResourceLoaded(s){return b(s.script)&&k.loadedResources.has(s.script)||b(s.link)&&k.loadedResources.has(s.link)}static addResourceLoaded(s){b(s.script)&&k.loadedResources.add(s.script),b(s.link)&&k.loadedResources.add(s.link)}waitUntil(s,m=15000){return new Promise((p,y)=>{if(s()){p();return}try{let h=Date.now(),x=setInterval(()=>{if(s())clearInterval(x),p();else if(Date.now()-h>m)clearInterval(x),y(Error("Highlighting engine failed to load within expected time."))},50)}catch(h){y(h)}})}}var i={builtIn:{urlPrefix:"https://cdn.jsdelivr.net/gh/PrismJS/prism@1.30.0",themes:{coy:"/themes/prism-coy.min.css",dark:"/themes/prism-dark.min.css",funky:"/themes/prism-funky.min.css",okaidia:"/themes/prism-okaidia.min.css",solarizedlight:"/themes/prism-solarizedlight.min.css",tomorrow:"/themes/prism-tomorrow.min.css",twilight:"/themes/prism-twilight.min.css",prism:"/themes/prism.min.css"},plugins:[{script:"/plugins/autoloader/prism-autoloader.min.js"},{script:"/plugins/line-numbers/prism-line-numbers.min.js",link:"/plugins/line-numbers/prism-line-numbers.min.css"},{script:"/plugins/line-highlight/prism-line-highlight.min.js",link:"/plugins/line-highlight/prism-line-highlight.min.css"},{script:"/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js",dependencies:[{script:"/plugins/toolbar/prism-toolbar.min.js",link:"/plugins/toolbar/prism-toolbar.min.css"}]}]},external:{urlPrefix:"https://cdn.jsdelivr.net/gh/PrismJS/prism-themes@1.9.0/themes",themes:{"a11y-dark":"/prism-a11y-dark.css","atom-dark":"/prism-atom-dark.css","base16-ateliersulphurpool.light":"/prism-base16-ateliersulphurpool.light.css",cb:"/prism-cb.css","coldark-cold":"/prism-coldark-cold.css","coldark-dark":"/prism-coldark-dark.css","coy-without-shadows":"/prism-coy-without-shadows.css",darcula:"/prism-darcula.css",dracula:"/prism-dracula.css","duotone-dark":"/prism-duotone-dark.css","duotone-earth":"/prism-duotone-earth.css","duotone-forest":"/prism-duotone-forest.css","duotone-light":"/prism-duotone-light.css","duotone-sea":"/prism-duotone-sea.css","duotone-space":"/prism-duotone-space.css",ghcolors:"/prism-ghcolors.css","gruvbox-dark":"/prism-gruvbox-dark.css","gruvbox-light":"/prism-gruvbox-light.css","holi-theme":"/prism-holi-theme.css",hopscotch:"/prism-hopscotch.css",laserwave:"/prism-laserwave.css",lucario:"/prism-lucario.css","material-dark":"/prism-material-dark.css","material-light":"/prism-material-light.css","material-oceanic":"/prism-material-oceanic.css","night-owl":"/prism-night-owl.css",nord:"/prism-nord.css","one-dark":"/prism-one-dark.css","one-light":"/prism-one-light.css",pojoaque:"/prism-pojoaque.css","shades-of-purple":"/prism-shades-of-purple.css","solarized-dark-atom":"/prism-solarized-dark-atom.css",synthwave84:"/prism-synthwave84.css",vs:"/prism-vs.css","vsc-dark-plus":"/prism-vsc-dark-plus.css",xonokai:"/prism-xonokai.css","z-touch":"/prism-z-touch.css"}}};class j extends k{resources=[];constructor(s){super();let{theme:m,darkMode:p}=s;l("Loaded config:",i),this.setTheme(m,p||""),this.setPlugins()}async initialize(){if(!window.Prism)window.Prism={manual:!0};else window.Prism.manual=!0;let s=async(m)=>{await this.loadResource(m)};try{await s({script:`${i.builtIn.urlPrefix}/components/prism-core.min.js`}),l("Core script loaded."),await Promise.all(this.resources.map(s)),l("[Prism Engine] All resources loaded.",this.resources)}catch(m){z("Error during initialization:",m),l("Resources attempted to load:",this.resources)}}setTheme(s,m){let p=(x)=>{this.resources.push({link:`${i.builtIn.urlPrefix}${x}`})},y=(x)=>{this.resources.push({link:`${i.external.urlPrefix}${x}`})},h=Boolean(m)&&window.matchMedia?.("(prefers-color-scheme: dark)").matches;if(h&&i.builtIn.themes[m]){p(i.builtIn.themes[m]),l(`[Prism Engine] Dark mode theme "${m}" applied based on system preference.`);return}if(!h&&i.builtIn.themes[s]){p(i.builtIn.themes[s]),l(`[Prism Engine] Theme "${s}" applied based on system preference.`);return}if(!h&&i.external.themes[s]){y(i.external.themes[s]),l(`[Prism Engine] External theme "${s}" applied based on system preference.`);return}if(h&&i.external.themes[m]){y(i.external.themes[m]),l(`[Prism Engine] External dark mode theme "${m}" applied based on system preference.`);return}p(i.builtIn.themes.prism),J(`[Prism Engine] Theme "${s}" is not supported.`)}setPlugins(){i.builtIn.plugins.forEach((s)=>{this.resources.push({script:b(s.script)?`${i.builtIn.urlPrefix}${s.script}`:void 0,link:b(s.link)?`${i.builtIn.urlPrefix}${s.link}`:void 0,dependencies:s.dependencies?.map((m)=>({script:b(m.script)?`${i.builtIn.urlPrefix}${m.script}`:void 0,link:b(m.link)?`${i.builtIn.urlPrefix}${m.link}`:void 0}))})}),document.body.classList.add("line-numbers")}async highlight(){window.Prism?.highlightAll?.()}}var t={builtIn:{urlPrefix:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0",themes:{default:"/styles/default.min.css",github:"/styles/github.min.css","github-dark":"/styles/github-dark.min.css",monokai:"/styles/monokai.min.css","monokai-sublime":"/styles/monokai-sublime.min.css",vs:"/styles/vs.min.css",vs2015:"/styles/vs2015.min.css",agate:"/styles/agate.min.css",androidstudio:"/styles/androidstudio.min.css",dracula:"/styles/dracula.min.css",nord:"/styles/nord.min.css","atom-one-dark":"/styles/atom-one-dark.min.css","atom-one-light":"/styles/atom-one-light.min.css","night-owl":"/styles/night-owl.min.css","shades-of-purple":"/styles/shades-of-purple.min.css","tokyo-night-dark":"/styles/tokyo-night-dark.min.css","tokyo-night-light":"/styles/tokyo-night-light.min.css"}}};class q extends k{resources=[];constructor(s){super();let{theme:m,darkMode:p}=s;l("Loaded config:",t),this.setTheme(m,p||"")}async initialize(){let s=async(m)=>{await this.loadResource(m)};try{await s({script:`${t.builtIn.urlPrefix}/highlight.min.js`}),l("Core script loaded."),await Promise.all(this.resources.map(s)),l("[Highlight Engine] All resources loaded.",this.resources)}catch(m){z("Error during initialization:",m),l("Resources attempted to load:",this.resources)}}setTheme(s,m){let p=(h)=>{this.resources.push({link:`${t.builtIn.urlPrefix}${h}`})};if(Boolean(m)&&window.matchMedia?.("(prefers-color-scheme: dark)").matches&&t.builtIn.themes[m]){p(t.builtIn.themes[m]),l(`[Highlight Engine] Dark mode theme "${m}" applied based on system preference.`);return}if(t.builtIn.themes[s]){p(t.builtIn.themes[s]),l(`[Highlight Engine] Theme "${s}" applied.`);return}p(t.builtIn.themes.default),J(`[Highlight Engine] Theme "${s}" is not supported, defaulting to "default".`)}async highlight(){await this.waitUntil(()=>Boolean(window.hljs)),window.hljs?.highlightAll?.()}}(async()=>{if(typeof document>"u")return;if(window.__highlightItInitialized)return;window.__highlightItInitialized=!0;try{let{engine:s,theme:m,darkMode:p,verbose:y}=F();C(y),l("highlight-it initialized with config:",{engine:s,theme:m,darkMode:p,verbose:y});let h;if(s==="highlight")h=new q({theme:m,darkMode:p});else h=new j({theme:m,darkMode:p});await h.initialize(),await h.highlight(),l("highlight-it: Code highlighting completed")}catch(s){z("highlight-it error:",s)}})();
